webpackJsonp([0],{"/TYz":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("htMM"),o=i("Veyx"),n=i("K60R"),s=n(a.a,o.a,!1,null,null,null);e.default=s.exports},"2og3":function(t,e,i){var a=i("EzFf");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("IzqT")("0139a10d",a,!0)},"80oW":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"chatlist-panel-search"},[i("el-input",{attrs:{placeholder:"Search",icon:"search"},on:{change:t.onChange}})],1)},o=[],n={render:a,staticRenderFns:o};e.a=n},B7k6:function(t,e,i){"use strict";var a=i("eTz6"),o=i("oGVo"),n=i("K60R"),s=n(a.a,o.a,!1,null,null,null);e.a=s.exports},Ejts:function(t,e,i){e=t.exports=i("YHym")(!1),e.push([t.i,".menu-horizontal .menu-horizontal-item:first-of-type{margin-left:0}.menu-horizontal-item{border-radius:50%;text-align:center;-webkit-transition:background-color .18s ease;transition:background-color .18s ease}.menu-horizontal-item,.pane-list-controls{-webkit-box-flex:0;-ms-flex:none;flex:none;height:100%}.pane-header.pane-list-header{-webkit-box-flex:0;-ms-flex:none;flex:none;height:59px;width:100%;background-color:#eee;-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;z-index:1000;padding:10px 16px 10px 15px;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.pane-list-user{-webkit-box-flex:1;-ms-flex:1;flex:1}.avatar{position:relative;border-radius:50%;overflow:hidden;background-color:#dfe5e7}.avatar-image.is-loaded{opacity:1}.avatar-image{display:block;opacity:0;position:relative;-webkit-transition:opacity .15s ease-out;transition:opacity .15s ease-out;width:100%;height:100%;z-index:100;border-radius:50%;overflow:hidden}",""])},EzFf:function(t,e,i){e=t.exports=i("YHym")(!1),e.push([t.i,".sideBar-body{position:relative;padding:10px!important;border-bottom:1px solid #f7f7f7;height:72px;margin:0!important;cursor:pointer}.sideBar-body:hover{background-color:#f2f2f2}.sideBar-avatar{text-align:center;padding:0!important}.avatar-icon img{border-radius:50%;height:49px;width:49px}.sideBar-main,.sideBar-main .row{padding:0!important}.sideBar-main .row{margin:0!important}.sideBar-name{padding:0 0 0 17px!important}.sideBar-message{padding:0 10px 10px 17px!important}.name-meta{font-size:19px;color:#000}.message_meta,.name-meta{font-weight:400;line-height:21px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;text-align:left}.message_meta{font-size:16px;color:#454545}.time-meta{text-align:right;font-size:12px;padding:1%!important;color:rgba(0,0,0,.4);vertical-align:baseline}.chatlist-panel-body{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;height:calc(100% - 110px);background-color:#fefefe;overflow-y:auto;overflow-x:hidden;z-index:1}",""])},HCwO:function(t,e,i){"use strict";function a(t){i("tBHq")}var o=i("x1ZM"),n=i("K60R"),s=a,r=n(null,o.a,!1,s,null,null);e.a=r.exports},InpP:function(t,e,i){"use strict";var a=i("aAGy"),o=i.n(a),n=i("zFTh"),s=i.n(n),r=i("mZ1w"),c=i.n(r),l=i("V/s/"),d=i("PJh5"),p=i.n(d);e.a={props:{search:{type:String,default:""}},computed:c()({filteredItems:function(){var t=this;try{return this.chat.filter(function(e){return e.room_name.toLowerCase().indexOf(t.search.toLowerCase())>-1})}catch(t){return[]}}},Object(l.mapState)(["chat","isEnd"])),data:function(){return{profile_picture:this.$store.getters.user.profile_picture||"https://speckyboy.com/wp-content/uploads/2013/10/flat_heros_07.png",loadingSide:!0,busy:!1,notEnd:!0,page:1}},methods:{loadChatList:function(){function t(){return e.apply(this,arguments)}var e=s()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isEnd){t.next=2;break}return t.abrupt("return");case 2:return this.busy=!0,this.loadingSide=!0,t.prev=4,t.next=7,this.$store.dispatch("loadContactMessage",{user_email:this.$store.getters.user.email.data,page:this.page});case 7:this.loadingSide=!1,this.busy=!1,this.page=this.page+1,t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),this.loadingSide=!1,this.$message({message:t.t0.message,showClose:!0,type:"error"});case 16:case"end":return t.stop()}},t,this,[[4,12]])}));return t}(),getDate:function(t){return p()(t).fromNow()},openChat:function(t){var e=this;try{var i=t.raw_room_name.split(" "),a=i.find(function(t){return t!==e.$store.getters.user.email.data});switch(t.room_type){case"single":this.$store.commit("SET_WELCOME",!1),QiscusSDK.render(),QiscusSDK.core.UI.chatTarget(a);break;case"group":this.$store.commit("SET_WELCOME",!1),QiscusSDK.render(),QiscusSDK.core.UI.chatGroup(t.room_id)}this.$store.commit("SET_ROOM_NOW",t.room_id)}catch(t){this.$message({message:t.message,showClose:!0,type:"error"})}}},mounted:function(){function t(){return e.apply(this,arguments)}var e=s()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$store.commit("SET_WELCOME",!0),e=[],this.$store.commit("SET_CHAT",e),t.prev=3,t.next=6,this.$store.dispatch("loadContactMessage",{user_email:this.$store.getters.user.email.data,page:this.page});case 6:this.loadingSide=!1,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(3),this.loadingSide=!1,this.$message({message:t.t0.message,showClose:!0,type:"error"});case 13:case"end":return t.stop()}},t,this,[[3,9]])}));return t}()}},Q5ug:function(t,e,i){e=t.exports=i("YHym")(!1),e.push([t.i,".chatlist-panel-search{background-color:#fbfbfb;-webkit-box-flex:0;-ms-flex:none;flex:none;padding:10px;border-bottom:1px solid rgba(0,0,0,.08)}",""])},Rdj2:function(t,e,i){"use strict";function a(t){i("2og3")}var o=i("InpP"),n=i("xm7D"),s=i("K60R"),r=a,c=s(o.a,n.a,!1,r,null,null);e.a=c.exports},StuT:function(t,e,i){"use strict";function a(t){i("a67M")}var o=i("rMTe"),n=i("o73B"),s=i("K60R"),r=a,c=s(o.a,n.a,!1,r,null,null);e.a=c.exports},TPdg:function(t,e,i){e=t.exports=i("YHym")(!1),e.push([t.i,".intro-text{font-size:14px;color:#929fa6;line-height:20px}.intro .intro-title{color:#4b5961;font-size:36px;font-weight:400}.intro{height:100%;background-color:#f7f9fa;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-sizing:border-box;box-sizing:border-box;border-left:1px solid rgba(0,0,0,.08);position:relative;padding-bottom:28px;padding-top:28px;cursor:default}.pane-body{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;z-index:1}.intro .intro-body{text-align:center;margin-top:-20px;max-width:460px;width:80%}.intro .intro-image{width:250px;height:250px;margin:0 auto;-webkit-transform-origin:center;transform-origin:center;opacity:0;background-repeat:no-repeat;background-size:contain;-webkit-transition:height .3s ease;transition:height .3s ease}.intro-image{background-image:url("+i("XGAo")+")}",""])},Veyx:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement;return(t._self._c||e)("app")},o=[],n={render:a,staticRenderFns:o};e.a=n},WGV0:function(t,e,i){"use strict";function a(t){i("nKA0")}var o=i("XaGK"),n=i("80oW"),s=i("K60R"),r=a,c=s(o.a,n.a,!1,r,null,null);e.a=c.exports},XGAo:function(t,e,i){t.exports=i.p+"img/opentrip-round.1295bf4.png"},XaGK:function(t,e,i){"use strict";e.a={methods:{onChange:function(t){this.$emit("update",t)}}}},a67M:function(t,e,i){var a=i("Ejts");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("IzqT")("100c55fa",a,!0)},eTz6:function(t,e,i){"use strict";var a=i("HCwO"),o=i("StuT"),n=i("td4r"),s=i("WGV0"),r=i("Rdj2"),c=i("V/s/");i("tBXR"),e.a={computed:Object(c.mapState)(["showWelcome","authenticated","total_unread"]),data:function(){return{search:""}},components:{Background:a.a,Heading:o.a,Welcome:n.a,Search:s.a,ContactList:r.a},methods:{updateSearch:function(t){this.search=t},init:function(){this.loading=!0;var t=this,e=this.$store.getters.user;this.$store.commit("SET_ROOM_NOW",0),this.$store.commit("SET_UNREAD_COUNT",0),QiscusSDK.core.init({AppId:"opentripa-4qe8taovu15",mode:"wide",options:{loginSuccessCallback:function(e){console.log("success_initialize chat"),t.loading=!1},newMessagesCallback:function(i){t.authenticated&&1===i.length&&i.forEach(function(i){if(i.email!==e.email.data){var a=new Audio("/popsound.mp3");a.load(),a.play(),t.$store.commit("ADD_OR_UPDATE_CHAT",i)}if(i.email===e.email.data&&t.$store.commit("JUST_UPDATE",i),i.room_id!==t.$store.getters.room&&i.email!==e.email.data)if(t.$store.commit("PLUS_UNREAD",1),"granted"===Notification.permission){var o=new Notification(i.username,{dir:"auto",body:i.message,tag:i.chat_type,icon:i.user_avatar_url});o.onshow=function(){setTimeout(function(){o.close()},3e3)}}else Notification.requestPermission(function(t){})})}}}),QiscusSDK.core.setUser(e.email.data,e.password,e.name,e.profile_picture)}},mounted:function(){this.init()}}},etC8:function(t,e,i){var a=i("TPdg");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("IzqT")("fd54019a",a,!0)},hez1:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"intro pane-body"},[i("div",{staticClass:"intro-body"},[i("div",{staticClass:"intro-image",staticStyle:{transform:"scale(1)",opacity:"1"}}),i("div",{staticClass:"intro-text-container",staticStyle:{opacity:"1",transform:"translateY(0px)"}},[i("h1",{staticClass:"intro-title"},[t._v("Welcome to OpenTrip Web Chat")])]),i("div",{staticClass:"intro-text"},[t._v("\r\n      Opentrip Web Chat helps make it easy for you to discuss your trips through the browser. select a contact to start the conversation\r\n    ")])])])}],n={render:a,staticRenderFns:o};e.a=n},htMM:function(t,e,i){"use strict";var a=i("mZ1w"),o=i.n(a),n=i("B7k6"),s=i("V/s/");e.a={middleware:"auth",data:function(){return{loading:!1}},head:function(){return{title:this.total_unread>0?"("+this.total_unread+") OpenTrip":"OpenTrip",meta:[{hid:"description",name:"description",content:"OpenTrip Web client for chat"}]}},computed:o()({},Object(s.mapState)(["total_unread"])),components:{App:n.a}}},iomJ:function(t,e,i){e=t.exports=i("YHym")(!1),e.push([t.i,"body,html{height:100%}.cDiv,body,html{width:100%;overflow:hidden;padding:0;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box}.cDiv{height:100vh}.message{padding:0!important;margin:0!important;background-size:cover;overflow:auto;height:100%}.container{padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media (min-width:768px){.container{width:750px}}@media (min-width:992px){.container{width:970px}}@media (min-width:1200px){.container{width:1170px}}.app{position:relative;overflow:hidden;top:19px;height:calc(100% - 38px);margin:auto!important;padding:0!important;-webkit-box-shadow:0 1px 1px 0 rgba(0,0,0,.06),0 2px 5px 0 rgba(0,0,0,.2);box-shadow:0 1px 1px 0 rgba(0,0,0,.06),0 2px 5px 0 rgba(0,0,0,.2)}.heading{padding:10px 16px 10px 15px;margin:0!important;height:60px;width:100%;background-color:#eee;z-index:1000}.heading-avatar{padding:0!important;cursor:pointer}.heading-avatar-icon img{border-radius:50%;height:40px;width:40px}.heading-name{padding:0!important;cursor:pointer}.heading-name-meta{font-weight:700;font-size:100%;padding:5px 5px 0;text-align:left;text-overflow:ellipsis;white-space:nowrap;color:#000;display:block}.heading-online{display:none;padding:0 5px;font-size:12px;color:#93918f}.heading-compose{padding:0}.heading-compose i{text-align:center;padding:5px;color:#93918f;cursor:pointer}.heading-dot{padding:0;margin-left:10px}.heading-dot i{text-align:right;padding:5px;color:#93918f;cursor:pointer}",""])},nKA0:function(t,e,i){var a=i("Q5ug");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("IzqT")("2db80ef8",a,!0)},o73B:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-row",{staticClass:"pane-header pane-list-header"},[i("el-col",{staticClass:"pane-list-user",attrs:{span:16}},[i("div",{staticClass:"avatar",staticStyle:{height:"40px",width:"40px",cursor:"pointer"}},[i("span",[i("img",{staticClass:"avatar-image is-loaded",staticStyle:{height:"40px",width:"40px"},attrs:{src:this.profile_picture}})])])]),i("el-col",{staticClass:"pane-list-controls",attrs:{span:8}},[i("el-row",{staticStyle:{top:"11px","text-align":"right"}},[i("el-col",{attrs:{span:16}},[i("i",{staticClass:"el-icon-message"})]),i("el-col",{staticStyle:{cursor:"pointer"},attrs:{span:8}},[i("el-dropdown",{attrs:{trigger:"click"}},[i("span",{staticClass:"el-dropdown-link"},[i("i",{staticClass:"el-icon-more"})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{nativeOn:{click:function(e){t.logOut(e)}}},[t._v("Logout")])],1)],1)],1)],1)],1)],1)},o=[],n={render:a,staticRenderFns:o};e.a=n},oGVo:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cDiv"},[i("background"),i("el-row",{staticClass:"container app"},[i("el-col",{staticStyle:{height:"100%","background-color":"#fefefe"},attrs:{span:8}},[i("heading"),i("search",{on:{update:t.updateSearch}}),i("contact-list",{attrs:{search:t.search}})],1),i("el-col",{staticStyle:{height:"100%"},attrs:{span:16}},[i("div",{staticClass:"message"},[i("div",{attrs:{id:"qiscus-widget"}}),t.showWelcome?i("welcome"):t._e()],1)])],1)],1)},o=[],n={render:a,staticRenderFns:o};e.a=n},rMTe:function(t,e,i){"use strict";e.a={data:function(){return{profile_picture:this.$store.getters.user.profile_picture||"https://qiscuss3.s3.amazonaws.com/uploads/55c0c6ee486be6b686d52e5b9bbedbbf/2.png"}},methods:{logOut:function(){console.log("logout"),this.$store.dispatch("logOut"),window.location.reload()}}}},tBHq:function(t,e,i){var a=i("uVND");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("IzqT")("7e95c1c2",a,!0)},tBXR:function(t,e,i){var a=i("iomJ");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("IzqT")("64d42334",a,!0)},td4r:function(t,e,i){"use strict";function a(t){i("etC8")}var o=i("hez1"),n=i("K60R"),s=a,r=n(null,o.a,!1,s,null,null);e.a=r.exports},uVND:function(t,e,i){e=t.exports=i("YHym")(!1),e.push([t.i,'#wrapper{display:block;overflow:auto;background:#dfdfdf -webkit-gradient(linear,left top,left bottom,from(#dddbd1),to(#d2dbdc));background:#dfdfdf linear-gradient(180deg,#dddbd1,#d2dbdc);width:100%;height:100%;position:fixed;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;z-index:0}#wrapper:before{position:absolute;z-index:-1;background-color:#f4eb2c;width:100%;height:222px;content:"";top:0;left:0}',""])},x1ZM:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{attrs:{id:"wrapper"}})},o=[],n={render:a,staticRenderFns:o};e.a=n},xm7D:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadChatList,expression:"loadChatList"},{name:"loading",rawName:"v-loading",value:t.loadingSide,expression:"loadingSide"}],staticClass:"chatlist-panel-body",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-immediate-check":"!isEnd","infinite-scroll-throttle-delay":"500","infinite-scroll-distance":"20"}},t._l(t.filteredItems,function(e){return i("el-row",{key:e.room_id,staticClass:"row sideBar-body",nativeOn:{click:function(i){t.openChat(e)}}},[i("el-col",{staticClass:"col-sm-3 col-xs-3 sideBar-avatar",attrs:{span:4}},[i("div",{staticClass:"avatar-icon"},["-dummy-"!=e.room_avatar_url?i("img",{attrs:{src:e.room_avatar_url}}):i("img",{attrs:{src:"https://speckyboy.com/wp-content/uploads/2013/10/flat_heros_07.png"}})])]),i("el-col",{staticClass:"col-sm-9 col-xs-9 sideBar-main",attrs:{span:20}},[i("el-row",{staticClass:"row"},[i("el-col",{staticClass:"col-sm-8 col-xs-8 sideBar-name",attrs:{span:16}},[i("span",{staticClass:"name-meta"},[t._v(t._s(e.room_name)+"\n                ")])]),i("el-col",{staticClass:"col-sm-4 col-xs-4 pull-right sideBar-time",attrs:{span:8}},[i("span",{staticClass:"time-meta pull-right"},[t._v(t._s(t.getDate(e.last_comment_timestamp))+"\n                ")])])],1),i("el-row",[i("el-col",{staticClass:"sideBar-message",attrs:{span:20}},[i("span",{staticClass:"message_meta"},[t._v("\n           "+t._s(e.last_comment_message)+"\n          ")])]),i("el-col",{attrs:{span:4}},[i("el-badge",{staticClass:"item",attrs:{value:e.unread_count,max:99}})],1)],1)],1)],1)}))},o=[],n={render:a,staticRenderFns:o};e.a=n}});
//# sourceMappingURL=index.40ed8e9b4e46feb2f942.js.map